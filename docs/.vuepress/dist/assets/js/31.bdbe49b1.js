(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{369:function(t,s,a){t.exports=a.p+"assets/img/img.e4192dd5.png"},370:function(t,s,a){t.exports=a.p+"assets/img/img_1.c4a3c711.png"},456:function(t,s,a){"use strict";a.r(s);var e=a(17),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[t._v("#")]),t._v(" Gitlab")]),t._v(" "),s("h2",{attrs:{id:"docker方式搭建gitlab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker方式搭建gitlab"}},[t._v("#")]),t._v(" docker方式搭建gitlab")]),t._v(" "),s("p",[t._v("1.执行docker命令")]),t._v(" "),s("p",[t._v("启动估计需要2分钟")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--detach")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--hostname")]),t._v(" gitlab.hh.com "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--publish")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8443")]),t._v(":443 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--publish")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v(":80 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--publish")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8022")]),t._v(":22 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--restart")]),t._v(" always "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--volume")]),t._v(" /data/gitlab/config:/etc/gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--volume")]),t._v(" /data/gitlab/logs:/var/log/gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--volume")]),t._v(" /data/gitlab/data:/var/opt/gitlab "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    --shm-size 2g "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    gitlab/gitlab-ce:16.4.2-ce.0\n")])])]),s("p",[t._v("2.配置/etc/hosts")]),t._v(" "),s("p",[t._v("查看本机ip")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ifconfig")]),t._v(" enp2s0\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看结果")]),t._v("\nenp2s0: "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("flags")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("416")]),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("3")]),t._v("<")]),t._v("UP,BROADCAST,RUNNING,MULTICAST"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("  mtu "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1500")]),t._v("\n        inet "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".5.34  netmask "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255.255")]),t._v(".255.0  broadcast "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".5.255\n        inet6 fe80::e905:2bcf:f95d:4d5  prefixlen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v("  scopeid 0x2"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v("<")]),t._v("link"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        ether 00:68:eb:bf:b6:a2  txqueuelen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("以太网"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        RX packets "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16389236")]),t._v("  bytes "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8491541210")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.4")]),t._v(" GB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        RX errors "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  dropped "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  overruns "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  frame "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n        TX packets "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6541729")]),t._v("  bytes "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("894963265")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("894.9")]),t._v(" MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        TX errors "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  dropped "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" overruns "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  carrier "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("  collisions "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])]),s("p",[t._v("/etc/hosts 中添加一条 "),s("code",[t._v("192.168.5.34 gitlab.hh.com")])]),t._v(" "),s("p",[t._v("3.登录\n访问： http://gitlab.hh.com")]),t._v(" "),s("p",[t._v("用户名：root\n查看初始密码：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /data/gitlab/config/initial_root_password\n")])])]),s("p",[t._v("4.设置语言\n点击头像->"),s("code",[t._v("Preferences")]),t._v("(偏好)->找到"),s("code",[t._v("Language")]),t._v("->选"),s("code",[t._v("中文")]),t._v("保存->刷新")]),t._v(" "),s("p",[t._v("5.重置管理员密码")]),t._v(" "),s("p",[t._v("方法一：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入容器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" gitlab "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入gitlab 控制台")]),t._v("\ngitlab-rails console "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v(" production   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#可能会等好几秒钟")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#这里提供两种搜索方式  通过id")]),t._v("\nuser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" User.where"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id:1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".first\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#或者 通过电子邮件搜索  或者用户名")]),t._v("\nuser "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" User.find_by"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("email:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin@example.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改密码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注意  这两个选项都得设置，  pass  为你要设置的密码")]),t._v("\nuser.password "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pass'")]),t._v("\nuser.password_confirmation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pass'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#保存退出")]),t._v("\nuser.save\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" gitlab "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\nroot@gitlab:/"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gitlab-rails console -e production")]),t._v("\n--------------------------------------------------------------------------------\n Ruby:         ruby "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v(".6p216 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2023")]),t._v("-03-30 revision 23a532679b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("x86_64-linux"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n GitLab:       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.4")]),t._v(".2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("67c88353b76"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" FOSS\n GitLab Shell: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14.28")]),t._v(".0\n PostgreSQL:   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("13.11")]),t._v("\n------------------------------------------------------------"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" booted "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("26")]),t._v(".59s "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nLoading production environment "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Rails "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.0")]),t._v(".6"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nirb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":001:"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">")]),t._v(" user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" User.where"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".first\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#<User id:1 @root>")]),t._v("\nirb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":002:"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">")]),t._v(" user.password "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Kenyin123'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Kenyin123"')]),t._v("\nirb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":003:"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">")]),t._v(" user.password_confirmation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Kenyin123'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Kenyin123"')]),t._v("\nirb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":004:"),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v(">")]),t._v(" user.save\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),s("p",[t._v("方法二：")]),t._v(" "),s("p",[t._v("点击头像\n"),s("img",{attrs:{src:a(369),alt:"img.png"}})]),t._v(" "),s("p",[t._v("6.新建项目")]),t._v(" "),s("p",[t._v("选择群组")]),t._v(" "),s("p",[t._v("7.删除项目")]),t._v(" "),s("p",[t._v("点击要删除的项目，然后：\n"),s("img",{attrs:{src:a(370),alt:"img_1.png"}})]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" existing_repo\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#如果报错 `fatal: 远程 origin 已经存在。`，需要 `git remote rm origin`")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" remote "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" origin http://gitlab.hh.com/group1/training.git\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-M")]),t._v(" main\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-uf")]),t._v(" origin main\n")])])]),s("p",[t._v("8.修改配置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进容器内部")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" gitlab /bin/bash\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改gitlab.rb")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/gitlab/gitlab.rb\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#加入如下")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#gitlab访问地址，可以写域名。如果端口不写的话默认为80端口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果使用公有云且配置了域名了，可以直接设置为域名")]),t._v("\nexternal_url "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://192.168.124.194'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ssh主机ip")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 同样如果有域名，这里也可以直接使用域名")]),t._v("\ngitlab_rails"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gitlab_ssh_host'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'192.168.124.194'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ssh连接端口")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 端口为启动docker时映射的ssh端口")]),t._v("\ngitlab_rails"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gitlab_shell_ssh_port'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8022")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 让配置生效")]),t._v("\ngitlab-ctl reconfigure\n")])])]),s("p",[t._v("参考：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://cloud.tencent.com/developer/article/2256871",target:"_blank",rel:"noopener noreferrer"}},[t._v("全流程Ubuntu安装Docker版Gitlab并初始化管理员"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.aliyun.com/article/922952",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gitlab----使用Docker方式安装部署Gitlab"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.aliyun.com/article/1356206",target:"_blank",rel:"noopener noreferrer"}},[t._v("5分钟带你重置Gitlab管理员账户密码"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/lianxiaohei/article/details/122665812",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker中安装Gitlab详细全教程"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.51cto.com/u_16099331/6419143",target:"_blank",rel:"noopener noreferrer"}},[t._v("docker安装 docker安装gitlab"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.gitlab.com/ee/install/docker.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"gitlab-runner环境安装配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-runner环境安装配置"}},[t._v("#")]),t._v(" GitLab-Runner环境安装配置")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull gitlab/gitlab-runner:v16.4.2\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" gitlab-runner "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--restart")]),t._v(" unless-stopped "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /data/gitlab-runner/config:/etc/gitlab-runner "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" /var/run/docker.sock:/var/run/docker.sock "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  gitlab/gitlab-runner:v16.4.2\n")])])]),s("p",[t._v("进入容器")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" gitlab-runner /bin/bash\n\ngitlab-ci-multi-runner register\n")])])]),s("p",[t._v("注册Runner")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("root@2c16245efcc7:/"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gitlab-ci-multi-runner register")]),t._v("\nRuntime platform                                    "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("arch")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("amd64 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("os")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("linux "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pid")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("revision")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("e77af703 "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.4")]),t._v(".2\nRunning "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" system-mode.\n\nEnter the GitLab instance URL "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("for example, https://gitlab.com/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输入")]),t._v("\nhttp://192.168.5.34/\nEnter the registration token:\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输入")]),t._v("\nGR1348941veATFuzokzpXqwyCN8uP\nEnter a description "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the runner:\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输入")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("2c16245efcc7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": test_runner\nEnter tags "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the runner "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("comma-separated"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输入")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\nEnter optional maintenance note "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the runner:\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输入")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\nWARNING: Support "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" registration tokens and runner parameters "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'register'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" has been deprecated "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" GitLab Runner "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15.6")]),t._v(" and will be replaced with support "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" authentication tokens. For "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" information, see https://docs.gitlab.com/ee/ci/runners/new_creation_workflow\nRegistering runner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". succeeded                     "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("runner")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("GR1348941veATFuzo\nEnter an executor: virtualbox, docker+machine, custom, docker, docker-windows, parallels, shell, ssh, kubernetes, docker-autoscaler, instance:\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#输入")]),t._v("\nshell\nRunner registered successfully. Feel "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" to start it, but "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" it's running already the config should be automatically reloaded"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\nConfiguration "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with the authentication token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" was saved "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/gitlab-runner/config.toml"')]),t._v("\n")])])]),s("p",[t._v("参考：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.gitlab.cn/runner/install/docker.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://robking.top/archives/%E4%BA%91%E5%8E%9F%E7%94%9Fdockergitlabgitlabrunner%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker + GitLab + GitLab Runner 自动化部署"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/zyy247796143/article/details/123842374",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitLab-Runner 从安装到配置到入门"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);