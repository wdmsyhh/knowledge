(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{284:function(t,a,e){t.exports=e.p+"assets/img/git-local-operations.dcec610d.png"},285:function(t,a,e){t.exports=e.p+"assets/img/git-branch-model.f3ecc3cf.png"},286:function(t,a,e){t.exports=e.p+"assets/img/gitlab-architecture.5944fa85.png"},327:function(t,a,e){"use strict";e.r(a);var s=e(13),r=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("title: Git & Code Review\nspeaker: Aaron Wang")]),t._v(" "),a("slide"),t._v(" "),a("h1",{attrs:{id:"git-code-review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-code-review"}},[t._v("#")]),t._v(" Git & Code Review")]),t._v(" "),a("p",[t._v("Aaron Wang")]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"git"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git"}},[t._v("#")]),t._v(" Git")]),t._v(" "),a("ul",[a("li",[t._v("以"),a("a",{attrs:{href:"https://www.liaoxuefeng.com/wiki/896043488029600",target:"_blank",rel:"noopener noreferrer"}},[t._v("廖雪峰 Git 教程"),a("OutboundLink")],1),t._v("为主，至少先读完前五章（有计划的把其它章节也读了），这里只做强调和补充。")]),t._v(" "),a("li",[t._v("务必系统学习，多练习、多思考，注意读懂 Git 的提示，不要胡乱尝试，Git 很考验一个人的学习能力和动手能力。")]),t._v(" "),a("li",[t._v("扩展阅读："),a("a",{attrs:{href:"https://ohshitgit.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Oh Shit, Git!?!"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"git-初始配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-初始配置"}},[t._v("#")]),t._v(" Git 初始配置")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" user.name "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Aaron Wang"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 换成自己的名字")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" user.email aaron.wang@maiscrm.com "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 换成自己的邮箱")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" core.editor "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" core.quotepath "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" push.default simple\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" rerere.enabled "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.d "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"diff"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.dc "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"diff --cached"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.s status "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-sb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.l "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"log --all --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative\"")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.b branch\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.c checkout\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.r reset\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.f fetch\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.m merge\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.p pull\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.pr "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pull --rebase"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.pu "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"push -u"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.cp cherry-pick\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.cm "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commit --amend"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.reset-permission "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'!git diff -p -R --no-color | grep -E \"^(diff|(old|new) mode)\" --color=never | git apply'")]),t._v("\n")])])]),a("p",[t._v("配置文件优先级："),a("code",[t._v(".git/config > ~/.gitconfig > /etc/gitconfig")])]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"正确使用-gitignore-忽略无需提交的文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正确使用-gitignore-忽略无需提交的文件"}},[t._v("#")]),t._v(" 正确使用 .gitignore 忽略无需提交的文件")]),t._v(" "),a("ul",[a("li",[t._v("一般无需提交的文件包括：\n"),a("ul",[a("li",[t._v("编辑器、IDE 的状态文件或临时文件（可整个团队共享的配置文件是建议提交的）。")]),t._v(" "),a("li",[t._v("编译或构建生成的文件。")]),t._v(" "),a("li",[t._v("第三方依赖，建议用相应的包管理器。")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer"}},[t._v("常用模板"),a("OutboundLink")],1)])]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"理解-working-directory、staging-area、git-directory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解-working-directory、staging-area、git-directory"}},[t._v("#")]),t._v(" 理解 working directory、staging area、git directory")]),t._v(" "),a("p",[a("img",{attrs:{src:e(284),alt:"git-local-operations"}})]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"理解-checkout、reset、revert-撤销改动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解-checkout、reset、revert-撤销改动"}},[t._v("#")]),t._v(" 理解 checkout、reset、revert（撤销改动）")]),t._v(" "),a("ul",[a("li",[t._v("uncached："),a("code",[t._v("git checkout <paths>")])]),t._v(" "),a("li",[t._v("cached："),a("code",[t._v("git reset <tree-ish> -- <paths>")])]),t._v(" "),a("li",[t._v("committed：\n"),a("ul",[a("li",[a("code",[t._v("git reset <tree-ish> -- <paths>; git checkout <paths>")])]),t._v(" "),a("li",[a("code",[t._v("git reset <commit> --hard")])]),t._v(" "),a("li",[a("code",[t._v("git revert <commit>")])])])])]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"理解-blob、tree、commit、branch、tag、head"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解-blob、tree、commit、branch、tag、head"}},[t._v("#")]),t._v(" 理解 blob、tree、commit、branch、tag、HEAD")]),t._v(" "),a("p",[t._v("!![git-data-model-1.png](./images/git-data-model-1.png .size-50)")]),t._v(" "),a("p",[t._v("!![git-data-model-2.png](./images/git-data-model-2.png .size-50)")]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"理解-fetch、pull、merge、rebase"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解-fetch、pull、merge、rebase"}},[t._v("#")]),t._v(" 理解 fetch、pull、merge、rebase")]),t._v(" "),a("ul",[a("li",[t._v("fetch：从 remote（一般是 GitLab 等服务器）下载 object、ref 到 git directory。")]),t._v(" "),a("li",[t._v("pull：fetch + merge。")]),t._v(" "),a("li",[t._v("pull --rebase：fetch + rebase")]),t._v(" "),a("li",[t._v("merge：会产生一个额外 commit，这个 commit 有两个父 commit。")]),t._v(" "),a("li",[t._v("rebase（变基）：以指定 branch（一般是刚刚 fetch 过的 remote branch）为基础重放当前 branch 的新 commit，不会产生额外 commit，一般用于单人独立开发时与主分支同步，另外给开源项目发 PR 一般也要用 rebase 以方便 maintainer 合并。")])]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"理解常见-branch-模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解常见-branch-模型"}},[t._v("#")]),t._v(" 理解常见 branch 模型")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://nvie.com/posts/a-successful-git-branching-model/",target:"_blank",rel:"noopener noreferrer"}},[t._v("A successful Git branching mode"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:e(285),alt:"git-branch-model.png"}}),t._v('{width="800px", height="800px"}')]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"gitlab-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-简介"}},[t._v("#")]),t._v(" GitLab 简介")]),t._v(" "),a("p",[a("img",{attrs:{src:e(286),alt:"gitlab-architecture"}})]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"项目流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目流程"}},[t._v("#")]),t._v(" 项目流程")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成 ssh 公私钥")]),t._v("\nssh-keygen\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 复制公钥到 https://gitlab.maiscrm.com/profile/keys")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ~/.ssh/id_rsa.pub\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 克隆需要的项目，以自己的 training 项目为例")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone git@gitlab.maiscrm.com:aaron.wang/training.git\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看当前 branch，默认 branch 一般是 develop，自己的项目注意在【Settings】>【Repository】>【Default Branch】中设置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从 develop branch 切出功能或 bug branch")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-b")]),t._v(" feat-xxx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交 commit")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" xxx\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# push branch 到 GitLab")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push --set-upstream origin feat-xxx\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选：同步 develop branch 最新代码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" fetch\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" rebase origin/develop\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" stash pop\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选：根据 code review 评论修改 commit，push 修改后的 commit 到 GitLab")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" xxx\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--amend")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v("\n")])])]),a("slide"),t._v(" "),a("h2",{attrs:{id:"code-review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#code-review"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://kb.maiscrm.com/grpc/development.html#code-review",target:"_blank",rel:"noopener noreferrer"}},[t._v("Code Review"),a("OutboundLink")],1)]),t._v(" "),a("slide"),t._v(" "),a("h2",{attrs:{id:"thanks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#thanks"}},[t._v("#")]),t._v(" Thanks")])],1)}),[],!1,null,null,null);a.default=r.exports}}]);