(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{497:function(n,t,e){"use strict";e.r(t);var s=e(17),a=Object(s.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"反向代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#反向代理"}},[n._v("#")]),n._v(" 反向代理")]),n._v(" "),t("h2",{attrs:{id:"docker-方式启动-nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-方式启动-nginx"}},[n._v("#")]),n._v(" Docker 方式启动 nginx")]),n._v(" "),t("ul",[t("li",[n._v("获取镜像")])]),n._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 下载最新版Nginx镜像 (其实此命令就等同于 : docker pull nginx:latest )")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" pull nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 下载指定版本的Nginx镜像 (xxx指具体版本号)")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" pull nginx:xxx\n")])])]),t("ul",[t("li",[n._v("启动容器")])]),n._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-itd")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("--name")]),n._v(" nginx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-p")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("80")]),n._v(":80 nginx\n")])])]),t("ul",[t("li",[n._v("进入容器")])]),n._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[n._v("docker")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("exec")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-it")]),n._v(" nginx "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("bash")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#安装vim")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" update\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("vim")]),n._v("\n")])])]),t("p",[n._v("配置文件是 "),t("code",[n._v("/etc/nginx/nginx.conf")])]),n._v(" "),t("p",[n._v("执行 "),t("code",[n._v("cat /etc/nginx/nginx.conf")]),n._v(" 可以看到最后一行是 "),t("code",[n._v("include /etc/nginx/conf.d/*.conf;")])]),n._v(" "),t("p",[n._v("默认的 server 配置在 "),t("code",[n._v("/etc/nginx/conf.d")]),n._v(" 中")]),n._v(" "),t("p",[n._v("反向代理配置，把 "),t("code",[n._v("/etc/nginx/conf.d/default.conf")]),n._v(" 内容改成：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("server {\n    listen       80;\n    server_name  www.get123.xyz;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n}\nserver {\n    listen       80;\n    server_name  ${域名 或者 IP}; # 看你实际访问的时候在浏览器输入的是域名还是 IP\n\n    location / {\n       # proxy_pass http://www.get123.xyz:8000;\n       proxy_pass http://8.222.191.29:8000;\n    }\n}\n")])])]),t("p",[n._v("修改配置后执行：")]),n._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[n._v("nginx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-s")]),n._v(" reload\n")])])]),t("p",[n._v("或者退出容器重启容器")]),n._v(" "),t("p",[n._v("我的简单实践：")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("server {\n    listen       80;\n    server_name  www.get123.xyz;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n}\nserver {\n    listen       80;\n    server_name  note.get123.xyz;\n\n    location / {\n       # proxy_pass http://www.get123.xyz:8000;\n       proxy_pass http://8.222.191.29:8000;\n    }\n}\nserver {\n    listen       80;\n    server_name  gpt.get123.xyz;\n\n    location / {\n        proxy_pass http://www.get123.xyz:1000;\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n}\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);